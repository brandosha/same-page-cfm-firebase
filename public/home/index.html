<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/6.3.5/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/6.3.5/firebase-auth.js"></script>
    <script defer src="/__/firebase/6.3.5/firebase-firestore.js"></script>
    <script defer src="/__/firebase/6.3.5/firebase-functions.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
    
    <script src="/resources/consoleReplace.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="/resources/loader.js"></script>
    <script src="/resources/FirebaseHandler.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/resources/loader.css">
    <link rel="stylesheet" href="style.css">
</head>
  <body>
    <div id="vue-main" class="container-fluid p-0">
      <div class="row">
        <div class="col-sm" :class="{ 'd-none d-sm-block': isValidGroup }">
          <div v-for="(value, key) in firebaseData.groups">
            <a class="btn btn-dark w-100 border-bottom group-btn px-3 py-1" :href="'#'+key">
              <span class="h5 text-capitalize">{{ value.name }}</span>
              <br>
              <span class="text-truncate">Filler data</span>
            </a>
          </div>
        </div>
        <div class="col-sm-8" v-if="isValidGroup">
          <div id="messages" class="container">
            <div v-for="message in firebaseData.groups[groupId].messagesArr" v-if="message !== undefined">
              <span class="text-capitalize">{{ firebaseData.users[message.from].name }}</span>: {{ message.text }}
            </div>
          </div>
          <div id="message-input">
            <form @submit.prevent="sendMessage" class="container-fluid">
              <div class="row form-group">
                <input type="text" v-model="newMessage" class="form-control mx-3 col">
                <input type="submit" value="Send" class="btn btn-primary mx-2 col-auto">
              </div>
            </form>
          </div>
        </div>
        <div class="col-sm-8 d-none d-sm-block" v-else>
          Select a group
        </div>
      </div>
    </div>

    <!--
    <div id="group-ui">
      <div v-if="isValidGroup" id="group-ui-body">
        <div id="messages">
          <div v-for="(value, key) in firebaseData.groups[groupId].messages">
            {{ firebaseData.users[value.from].name }}: {{ value.text }}
          </div>
        </div>
      </div>
    </div>
    -->

    <div id="debug">
      <div v-if="debugging" id="debug-body">
        <div id="debug-top" class="w-100 bg-light">
          <div id="debug-resize-control" class="w-100 d-flex justify-content-center align-items-center" style="height: 8px; background-color: gray">
            <div style="height: 2px; width: 30px; background-color: black"></div>
          </div>
          <form @submit.prevent='execute' class="container-fluid mt-2">
            <div class="row form-group">
              <input type="text" v-model="command" class="form-control text-monospace mx-2 col">
              <input type="submit" value="Execute" class="btn btn-primary mx-2 col-auto">
            </div>
          </form>
        </div>
        
        <div class="text-monospace border-bottom px-2" v-for="log in logs" :class="log.type">
          <pre class="d-inline">{{ log.text }}</pre>
        </div>
      </div>
    </div>

    <div id="loader" class="full-page-container">
      <div class="loader-container">
        <div class="d5"></div>
        <div class="d4"></div>
        <div class="d3"></div>
        <div class="d2"></div>
        <div class="d1"></div>
      </div>
    </div>

    <script defer src="main.js"></script>
  </body>
</html>
